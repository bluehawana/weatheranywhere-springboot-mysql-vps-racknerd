<!DOCTYPE html>
<meta charset="UTF-8" />
<html>
  <head>
    <meta
      media="screen"
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Start Page</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      // Automatic theme switching based on time (18:00-07:59 = dark, 08:00-17:59 = white)
      function applyThemeBasedOnTime() {
        try {
          // Wait for body to exist
          if (!document.body) {
            return;
          }

          const now = new Date();
          const hour = now.getHours();

          // Validate hour is a number in valid range
          if (isNaN(hour) || hour < 0 || hour > 23) {
            console.warn("Invalid hour detected, defaulting to white theme");
            document.body.classList.remove("dark-theme");
            return;
          }

          // Dark theme: 18:00 (6 PM) to 07:59 (7:59 AM)
          // White theme: 08:00 (8 AM) to 17:59 (5:59 PM)
          if (hour >= 18 || hour < 8) {
            document.body.classList.add("dark-theme");
          } else {
            document.body.classList.remove("dark-theme");
          }
        } catch (error) {
          console.error("Error applying theme:", error);
          if (document.body) {
            document.body.classList.remove("dark-theme");
          }
        }
      }

      // Apply theme on DOM ready
      document.addEventListener("DOMContentLoaded", function () {
        applyThemeBasedOnTime();
        // Check and update theme every minute
        setInterval(applyThemeBasedOnTime, 60000);
      });

      $(document).ready(function () {
        $("#weatherForm").submit(function (event) {
          event.preventDefault(); // Prevent the form from submitting normally

          // Get the input value
          var city = $("#city").val();

          // Make AJAX request
          $.get("/weather?city=" + city, function (data) {
            // Update the content of the weatherDiv
            $("#weatherDiv").html(data);
          }).fail(function () {
            $("#weatherDiv").html("Failed to fetch weather information.");
          });
        });
      });
    </script>
  </head>
  <body
    style="
      text-align: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 5px;
      width: 100%;
    "
  >
    <h1 style="font-size: 1.3rem; margin: 5px 0">üåê WeatherAnywhere üå¶Ô∏è</h1>
    <pre class="ascii-art">
    ____    __    ____  _______     ___   .___________. __    __     _______ .______              ___      .__   __. ____    ____ ____    __    ____  __    __   _______ .______       _______
    \   \  /  \  /   / |   ____|   /   \  |           ||  |  |  | |   ____||   _  \              /   \     |  \ |  | \   \  /   / \   \  /  \  /   / |  |  |  | |   ____||   _  \     |   ____|
     \   \/    \/   /  |  |__     /  ^  \ `---|  |----`|  |__|  | |  |__   |  |_)  |            /  ^  \    |   \|  |  \   \/   /   \   \/    \/   /  |  |__|  | |  |__   |  |_)  |    |  |__
      \            /   |   __|   /  /_\  \    |  |     |   __   | |   __|  |      /            /  /_\  \   |  . `  |   \_    _/     \            /   |   __   | |   __|  |      /     |   __|
       \    /\    /    |  |____ /  _____  \   |  |     |  |  |  | |  |____ |  |\  \----.      /  _____  \  |  |\   |     |  |        \    /\    /    |  |  |  | |  |____ |  |\  \----.|  |____
        \__/  \__/     |_______/__/     \__\  |__|     |__|  |__| |_______|| _| `._____|     /__/     \__\ |__| \__|     |__|         \__/  \__/     |__|  |__| |_______|| _| `._____||_______|

</pre
    >
    <pre class="ascii-logo">
                                        ___    ,'""""'.
                                    ,"""   """"'      `.
                                   ,'        _.         `._
                                  ,'       ,'              `"""'.
                                 ,'    .-""`.    ,-'            `.
                                ,'    (        ,'                :
                              ,'     ,'           __,            `.
                        ,""""'     .' ;-.    ,  ,'  \             `"""".
                      ,'           `-(   `._(_,'     )_                `.
                     ,'         ,---. \ @ ;   \ @ _,'                   `.
                ,-""'         ,'      ,--'-    `;'                       `.
               ,'            ,'      (      `. ,'                          `.
               ;            ,'        \    _,','                            `.
              ,'            ;          `--'  ,'                              `.
             ,'             ;          __    (                    ,           `.
             ;              `____... (  ¬§  )   `.                  ,'           ,'
             ;    ...----'''' )  _.-  --       `.                ,'    ,'    ,'
_....----''' '.        _..--"_.-:.-' .' ---       `.             ,''.   ,' `--'
              `"  "" _.-'' .-'`-.:..___...--' `-._      ,-"'   `-'
              `"  "" _.-'' .-'`-.:..___...--' `-._      ,-"'   `-'
        _.--'       _.-'    .'   .' .'               `"""""
  __.-''        _.-'     .-'   .'  /
 '          _.-' .-'  .-'        .'
        _.-'  .-'  .-' .'  .'   /
    _.-'      .-'   .-'  .'   .'
_.-'       .-'    .'   .'    /
       _.-'    .-'   .'    .'
    .-'            .'

    (Art by Michal 'Goldmoon' Kwasniewski)
</pre
    >
    <p style="margin: 3px 0; font-size: 0.85rem">
      <strong>üíæ Since 1999!</strong> | Search ANY city worldwide üåç
    </p>
    <p
      style="
        font-family: 'Courier New', monospace;
        color: #003366;
        margin: 5px 0;
        font-weight: bold;
        font-size: 0.85rem;
      "
    >
      ‚ö° No Flash | No Plugins | Pure HTML Magic ‚ö°
    </p>
    <form
      id="weatherForm"
      method="get"
      style="margin: 10px auto; max-width: 600px; width: 100%; padding: 0 10px"
    >
      <label for="city" style="font-size: 16px; font-weight: bold"
        >Enter a city:</label
      ><br />
      <input
        type="text"
        id="city"
        name="city"
        style="
          padding: 10px;
          font-size: 16px;
          width: 100%;
          max-width: 300px;
          border: 2px solid #333;
        "
      />
      <input
        type="submit"
        value="Get Weather"
        style="
          padding: 12px 20px;
          font-size: 16px;
          background-color: #0066cc;
          color: white;
          border: 2px solid #004080;
          cursor: pointer;
          font-weight: bold;
          min-height: 44px;
        "
      />
    </form>
    <div id="weatherDiv" style="margin-top: 10px"></div>
    <!-- This div will contain the weather information -->
  </body>
</html>
